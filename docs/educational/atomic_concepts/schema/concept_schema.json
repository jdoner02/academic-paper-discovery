{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Atomic Concept Definition",
  "description": "JSON schema for mathematical and educational concepts compatible with elastic stack ingestion",
  "type": "object",
  "required": [
    "id",
    "name",
    "type",
    "domain",
    "level",
    "formal_statement",
    "informal_description",
    "timestamp"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "Unique identifier using snake_case format"
    },
    "name": {
      "type": "string",
      "description": "Human readable name of the concept"
    },
    "type": {
      "type": "string",
      "enum": ["axiom", "theorem", "definition", "lemma", "corollary", "example", "counterexample", "proof", "application"],
      "description": "Classification of the mathematical concept"
    },
    "domain": {
      "type": "string",
      "enum": ["logic", "set_theory", "number_theory", "algebra", "geometry", "analysis", "topology", "combinatorics", "graph_theory", "computer_science"],
      "description": "Mathematical domain or field"
    },
    "subdomain": {
      "type": "string",
      "description": "More specific classification within the domain"
    },
    "level": {
      "type": "string",
      "enum": ["elementary", "middle_school", "high_school", "undergraduate", "graduate", "research"],
      "description": "Educational level for accessibility"
    },
    "formal_statement": {
      "type": "string",
      "description": "Precise mathematical statement in LaTeX format"
    },
    "informal_description": {
      "type": "string",
      "description": "Plain English explanation accessible to the target level"
    },
    "prerequisites": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of concept IDs that should be understood first"
    },
    "depends_on": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Direct logical dependencies for this concept"
    },
    "enables": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Concepts that this concept directly enables or leads to"
    },
    "examples": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "description": {"type": "string"},
          "formal": {"type": "string"},
          "explanation": {"type": "string"},
          "level": {"type": "string"}
        }
      },
      "description": "Illustrative examples with multiple complexity levels"
    },
    "counterexamples": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "description": {"type": "string"},
          "formal": {"type": "string"},
          "explanation": {"type": "string"}
        }
      },
      "description": "Examples that demonstrate what the concept is NOT"
    },
    "historical_context": {
      "type": "string",
      "description": "Historical development and motivation for the concept"
    },
    "pedagogical_notes": {
      "type": "string",
      "description": "Teaching strategies and common misconceptions"
    },
    "proof_sketches": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {"type": "string"},
          "description": {"type": "string"},
          "steps": {"type": "array", "items": {"type": "string"}},
          "level": {"type": "string"}
        }
      },
      "description": "Proof outlines at different levels of detail"
    },
    "applications": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Real-world or mathematical applications"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Searchable keywords for elastic stack indexing"
    },
    "difficulty": {
      "type": "integer",
      "minimum": 1,
      "maximum": 10,
      "description": "Subjective difficulty rating"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO format timestamp of creation/last update"
    },
    "relationships": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {"type": "string", "enum": ["depends_on", "enables", "generalizes", "specializes", "equivalent", "analogous", "contradicts"]},
          "target": {"type": "string"},
          "strength": {"type": "number", "minimum": 0, "maximum": 1},
          "description": {"type": "string"}
        }
      },
      "description": "Detailed relationships for graph visualization"
    },
    "elastic_metadata": {
      "type": "object",
      "properties": {
        "index_name": {"type": "string"},
        "doc_type": {"type": "string"},
        "boost": {"type": "number"},
        "search_fields": {"type": "array", "items": {"type": "string"}}
      },
      "description": "Elasticsearch-specific metadata for optimal indexing"
    }
  },
  "additionalProperties": false
}
