{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Atomic Task Schema",
  "description": "Comprehensive schema for educational software engineering tasks with agile simulation support",
  "type": "object",
  "required": [
    "id", "type", "title", "description", "priority", "effort", "skills", 
    "learning_objectives", "acceptance_criteria", "definition_of_done"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[A-Z]+-[0-9]+$",
      "description": "Unique identifier (e.g., EPIC-1, FEAT-42, TASK-123)"
    },
    "type": {
      "enum": ["epic", "feature", "user_story", "task", "subtask"],
      "description": "Task hierarchy level"
    },
    "title": {
      "type": "string",
      "maxLength": 120,
      "description": "Concise, descriptive title"
    },
    "description": {
      "type": "string",
      "description": "Detailed explanation of the work to be done"
    },
    "priority": {
      "enum": ["critical", "high", "medium", "low"],
      "description": "Business priority level"
    },
    "effort": {
      "type": "object",
      "required": ["hours", "story_points", "complexity"],
      "properties": {
        "hours": {
          "type": "number",
          "minimum": 0.25,
          "maximum": 40,
          "description": "Estimated effort in hours"
        },
        "story_points": {
          "type": "integer",
          "minimum": 1,
          "maximum": 21,
          "description": "Fibonacci story points for agile estimation"
        },
        "complexity": {
          "enum": ["trivial", "simple", "medium", "complex", "epic"],
          "description": "Cognitive complexity level"
        }
      }
    },
    "skills": {
      "type": "object",
      "required": ["primary_role", "required_skills", "skill_level"],
      "properties": {
        "primary_role": {
          "enum": [
            "backend_developer", "frontend_developer", "fullstack_developer",
            "devops_engineer", "qa_engineer", "data_scientist", "ml_engineer",
            "system_architect", "technical_writer", "product_manager",
            "scrum_master", "ui_ux_designer"
          ],
          "description": "Primary role responsible for this task"
        },
        "required_skills": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of technical skills needed"
        },
        "skill_level": {
          "enum": ["novice", "basic", "developing", "proficient", "advanced", "mastered"],
          "description": "Minimum skill level required"
        },
        "secondary_roles": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Additional roles that may contribute"
        }
      }
    },
    "learning_objectives": {
      "type": "object",
      "required": ["cognitive_level", "objectives"],
      "properties": {
        "cognitive_level": {
          "enum": ["remember", "understand", "apply", "analyze", "evaluate", "create"],
          "description": "Bloom's taxonomy cognitive level"
        },
        "objectives": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Specific learning outcomes"
        },
        "prerequisites": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Required prior knowledge or completed tasks"
        },
        "wiki_references": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Wiki pages for additional context"
        }
      }
    },
    "acceptance_criteria": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["criterion", "testable"],
        "properties": {
          "criterion": {
            "type": "string",
            "description": "Specific acceptance requirement"
          },
          "testable": {
            "type": "boolean",
            "description": "Whether this can be automatically verified"
          },
          "test_method": {
            "type": "string",
            "description": "How to verify this criterion"
          }
        }
      }
    },
    "definition_of_done": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Quality checklist items"
    },
    "dependencies": {
      "type": "object",
      "properties": {
        "blocks": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Task IDs that this task blocks"
        },
        "blocked_by": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Task IDs that must complete before this task"
        },
        "related": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Related tasks for context"
        }
      }
    },
    "assessment": {
      "type": "object",
      "properties": {
        "unit_test_question": {
          "type": "object",
          "properties": {
            "question": {
              "type": "string",
              "description": "Multiple choice or short answer question"
            },
            "type": {
              "enum": ["multiple_choice", "short_answer", "practical_exercise", "code_review"],
              "description": "Assessment method type"
            },
            "options": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Answer options for multiple choice"
            },
            "correct_answer": {
              "type": "string",
              "description": "Correct answer or key points"
            },
            "explanation": {
              "type": "string",
              "description": "Why this answer is correct"
            }
          }
        },
        "competency_indicators": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "level": {
                "enum": ["novice", "basic", "developing", "proficient", "advanced", "mastered"]
              },
              "description": {
                "type": "string",
                "description": "What student can do at this level"
              }
            }
          }
        }
      }
    },
    "agile_metadata": {
      "type": "object",
      "properties": {
        "sprint_ready": {
          "type": "boolean",
          "description": "Whether task is refined enough for sprint planning"
        },
        "epic_id": {
          "type": "string",
          "description": "Parent epic identifier"
        },
        "feature_id": {
          "type": "string",
          "description": "Parent feature identifier"
        },
        "user_story_id": {
          "type": "string",
          "description": "Parent user story identifier"
        },
        "labels": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for categorization"
        },
        "team_assignment": {
          "type": "string",
          "description": "Which team should handle this task"
        }
      }
    },
    "educational_metadata": {
      "type": "object",
      "properties": {
        "target_audience": {
          "type": "array",
          "items": {
            "enum": [
              "high_school", "undergraduate", "graduate", "bootcamp", 
              "junior_developer", "mid_level_developer", "senior_developer",
              "career_changer", "self_taught"
            ]
          }
        },
        "concepts_taught": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Key concepts this task teaches"
        },
        "industry_relevance": {
          "type": "string",
          "description": "How this applies in real software engineering roles"
        },
        "common_pitfalls": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Common mistakes and how to avoid them"
        },
        "extension_activities": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Additional challenges for advanced learners"
        }
      }
    },
    "mentoring": {
      "type": "object",
      "properties": {
        "mentor_notes": {
          "type": "string",
          "description": "Guidance for mentors supporting this task"
        },
        "check_in_questions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Questions for daily standup or check-ins"
        },
        "success_indicators": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Signs that the student is succeeding"
        },
        "intervention_triggers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Signs that additional support is needed"
        }
      }
    },
    "created_date": {
      "type": "string",
      "format": "date-time",
      "description": "When this task was created"
    },
    "updated_date": {
      "type": "string",
      "format": "date-time",
      "description": "Last modification date"
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
      "description": "Semantic version for task evolution tracking"
    }
  }
}
